{"remainingRequest":"/Users/brianphan/jets/course-catalog-v2/node_modules/babel-loader/lib/index.js!/Users/brianphan/jets/course-catalog-v2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/brianphan/jets/course-catalog-v2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/brianphan/jets/course-catalog-v2/src/components/FileUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/brianphan/jets/course-catalog-v2/src/components/FileUpload.vue","mtime":1609282060284},{"path":"/Users/brianphan/jets/course-catalog-v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/brianphan/jets/course-catalog-v2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/brianphan/jets/course-catalog-v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/brianphan/jets/course-catalog-v2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'file-upload',\n  props: {\n    allowedExt: {\n      type: Array\n    },\n    // whether to emit on drop or on upload clicked\n    emitImmediately: {\n      type: Boolean,\n      default: false\n    },\n    reset: {\n      type: Boolean\n    },\n    id: {\n      type: String,\n      default: 'manual-upload'\n    },\n    preview: {\n      type: String\n    }\n  },\n  mounted: function mounted() {\n    var dropzone = this.$refs.dropzone;\n    var events = ['drag', 'dragstart', 'dragend', 'dragover', 'dragenter', 'dragleave', 'drop'];\n    events.forEach(function (event) {\n      dropzone.addEventListener(event, function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n      });\n      document.addEventListener(event, function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n      });\n    });\n  },\n  data: function data() {\n    return {\n      dragover: false,\n      file: null,\n      error: null,\n      state: 'empty',\n      fileSrc: null\n    };\n  },\n  watch: {\n    file: function file(_file) {\n      this.error = null;\n\n      if (!_file) {\n        this.state = 'empty';\n        return;\n      }\n\n      if (!this.validate(_file)) {\n        this.state = 'error';\n        this.error = 'File type not allowed';\n        return;\n      }\n\n      this.state = 'select';\n\n      if (this.emitImmediately) {\n        this.$emit('file', _file);\n      }\n    },\n    reset: function reset(shouldReset) {\n      if (shouldReset) {\n        this.file = null;\n        this.dragover = false;\n        this.state = 'empty';\n        this.error = null;\n        this.fileSrc = null;\n        var input = document.getElementById(this.id);\n        input.value = null;\n      }\n    }\n  },\n  computed: {\n    fileType: function fileType() {\n      if (this.file) {\n        return this.file.type;\n      }\n\n      return '';\n    },\n    filePreview: function filePreview() {\n      var fileSrc = this.fileSrc,\n          preview = this.preview;\n\n      if (!fileSrc && !preview) {\n        return null;\n      }\n\n      if (fileSrc) {\n        return fileSrc;\n      }\n\n      if (preview) {\n        return preview;\n      }\n\n      return fileSrc;\n    }\n  },\n  methods: {\n    handleDragEvent: function handleDragEvent(e, state) {\n      // Dont do anything when leaving button\n      if (e.target.className === 'upload-button') {\n        return;\n      } // Dont do anything when entering button\n\n\n      if (e.fromElement.className === 'upload-button') {\n        return;\n      }\n\n      this.dragover = state === 'enter';\n    },\n    getDropFile: function getDropFile(e) {\n      e.stopImmediatePropagation();\n      e.preventDefault();\n      var file = e.dataTransfer.files[0];\n      this.dragover = false;\n      this.file = file;\n    },\n    getInputFile: function getInputFile(e) {\n      var _this = this;\n\n      e.stopImmediatePropagation();\n      e.preventDefault();\n      var file = e.target.files[0];\n      this.file = file;\n      var reader = new FileReader();\n\n      reader.onload = function (fileData) {\n        console.log(_this);\n        _this.fileSrc = fileData.target.result;\n      };\n\n      reader.readAsDataURL(file);\n    },\n    validate: function validate(file) {\n      var ext = file.type.split('/')[1];\n      var valid = false;\n\n      if (!this.allowedExt) {\n        return true;\n      }\n\n      this.allowedExt.forEach(function (a) {\n        if (ext === a) {\n          valid = true;\n        }\n      });\n      return valid;\n    },\n    upload: function upload(file) {\n      this.$emit('file', file);\n      this.file = null;\n      this.$refs.fileInput.value = null;\n    }\n  }\n};",{"version":3,"sources":["FileUpload.vue"],"names":[],"mappings":"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","sourcesContent":["<template lang=\"pug\">\n\t.file-upload(:class='[state, { \"has-file\" : file }]')\n\t\t.drop-zone(\n\t\t\t@dragenter='handleDragEvent( $event, \"enter\" )'\n\t\t\t@dragleave='handleDragEvent( $event, \"leave\" )'\n\t\t\t@drop='getDropFile( $event )'\n\t\t\t:class='{ dragover }'\n\t\t\tref='dropzone'\n\t\t)\n\t\t\tembed.file-preview(\n\t\t\t\tv-if='filePreview'\n\t\t\t\t:src='filePreview'\n\t\t\t\t:type='fileType'\n\t\t\t)\n\t\t\t.no-file\n\t\t\t\tp Drop Here\n\t\t\t\tp - or -\n\t\t\t.error-message(:class='{ active : error }')\n\t\t\t\tp.error {{ error }}\n\t\t\t.file(v-if='file')\n\t\t\t\tp {{ file.name }}\n\t\t\tlabel.upload-button(:for='id') Choose a file\n\t\t\tinput(:id='id' type='file' @change='getInputFile( $event )' ref='fileInput')\n\t\t.button(v-show='file' @click='upload( file )') Upload\n</template>\n\n<script>\nexport default {\n\tname : 'file-upload',\n\n\tprops : {\n\t\tallowedExt : {\n\t\t\ttype : Array\n\t\t},\n\t\t// whether to emit on drop or on upload clicked\n\t\temitImmediately : {\n\t\t\ttype    : Boolean,\n\t\t\tdefault : false,\n\t\t},\n\n\t\treset : {\n\t\t\ttype : Boolean,\n\t\t},\n\n\t\tid : {\n\t\t\ttype    : String,\n\t\t\tdefault : 'manual-upload',\n\t\t},\n\n\t\tpreview : {\n\t\t\ttype : String,\n\t\t},\n\t},\n\n\tmounted() {\n\n\t\tconst { dropzone } = this.$refs;\n\n\t\tconst events = ['drag', 'dragstart', 'dragend', 'dragover', 'dragenter', 'dragleave', 'drop'];\n\n\t\tevents.forEach( ( event ) => {\n\n\t\t\tdropzone.addEventListener( event, ( e ) => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t} );\n\n\t\t\tdocument.addEventListener( event, ( e ) => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t} );\n\n\t\t} );\n\n\n\t},\n\n\tdata : () => ( {\n\t\tdragover : false,\n\t\tfile     : null,\n\t\terror    : null,\n\t\tstate    : 'empty',\n\n\t\tfileSrc : null,\n\t} ),\n\n\twatch : {\n\n\t\tfile( file ) {\n\n\t\t\tthis.error = null;\n\n\t\t\tif ( !file ) {\n\t\t\t\tthis.state = 'empty';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( !this.validate( file ) ) {\n\t\t\t\tthis.state = 'error';\n\t\t\t\tthis.error = 'File type not allowed';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.state = 'select';\n\n\t\t\tif ( this.emitImmediately ) {\n\t\t\t\tthis.$emit( 'file', file );\n\t\t\t}\n\n\t\t},\n\n\t\treset( shouldReset ) {\n\n\t\t\tif ( shouldReset ) {\n\t\t\t\tthis.file     = null;\n\t\t\t\tthis.dragover = false;\n\t\t\t\tthis.state    = 'empty';\n\t\t\t\tthis.error    = null;\n\t\t\t\tthis.fileSrc  = null;\n\n\t\t\t\tconst input = document.getElementById( this.id );\n\t\t\t\tinput.value = null;\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputed : {\n\t\tfileType() {\n\t\t\tif ( this.file ) {\n\t\t\t\treturn this.file.type;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\n\t\tfilePreview() {\n\t\t\tconst { fileSrc, preview } = this;\n\t\t\tif ( !fileSrc && !preview ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( fileSrc ) {\n\t\t\t\treturn fileSrc;\n\t\t\t}\n\n\t\t\tif ( preview ) {\n\t\t\t\treturn preview;\n\t\t\t}\n\n\t\t\treturn fileSrc;\n\t\t}\n\t},\n\n\tmethods : {\n\t\thandleDragEvent( e, state ) {\n\n\t\t\t// Dont do anything when leaving button\n\t\t\tif ( e.target.className === 'upload-button' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Dont do anything when entering button\n\t\t\tif ( e.fromElement.className === 'upload-button' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.dragover = state === 'enter';\n\n\t\t},\n\n\t\tgetDropFile( e ) {\n\n\t\t\te.stopImmediatePropagation();\n\t\t\te.preventDefault();\n\n\t\t\tconst file = e.dataTransfer.files[0];\n\n\t\t\tthis.dragover = false;\n\n\t\t\tthis.file = file;\n\n\t\t},\n\n\t\tgetInputFile( e ) {\n\n\t\t\te.stopImmediatePropagation();\n\t\t\te.preventDefault();\n\n\t\t\tconst file = e.target.files[0];\n\n\t\t\tthis.file = file;\n\n\t\t\tconst reader = new FileReader();\n\n\t\t\treader.onload = ( fileData ) => {\n\t\t\t\tconsole.log( this );\n\t\t\t\tthis.fileSrc = fileData.target.result;\n\t\t\t};\n\n\t\t\treader.readAsDataURL( file );\n\n\t\t},\n\n\t\tvalidate( file ) {\n\n\t\t\tconst ext = file.type.split( '/' )[1];\n\n\t\t\tlet valid = false;\n\n\t\t\tif ( !this.allowedExt ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tthis.allowedExt.forEach( ( a ) => {\n\n\t\t\t\tif ( ext === a ) {\n\t\t\t\t\tvalid = true;\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn valid;\n\n\t\t},\n\n\t\tupload( file ) {\n\n\t\t\tthis.$emit( 'file', file );\n\n\t\t\tthis.file = null;\n\t\t\tthis.$refs.fileInput.value = null;\n\n\t\t},\n\n\t}\n\n};\n</script>\n\n<style lang=\"scss\">\n\t.file-upload {\n\t\tmargin: 15px;\n\n\t\t&.empty {\n\n\t\t\t.drop-zone {\n\t\t\t\t.no-file {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\t&.select {\n\n\t\t\t.drop-zone {\n\t\t\t\t.file {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.button {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\n\t\t}\n\n\t\t&.error {\n\n\t\t\t.drop-zone {\n\t\t\t\t.file {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\n\t\t\t\t.error-message {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tinput[type=\"file\"] {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\t.drop-zone {\n\t\t\tborder: #4d6ea2 dashed 1px;\n\t\t\tborder-radius: 5px;\n\t\t\tpadding: 20px 20px 40px;\n\t\t\ttext-align: center;\n\n\t\t\t&.dragover {\n\t\t\t\tbackground-color: #4d6ea2;\n\t\t\t}\n\n\t\t\t> * {\n\t\t\t\tflex: 1 0 0;\n\t\t\t}\n\n\t\t\t.file-preview {\n\t\t\t\tflex: 0 0 100%;\n\t\t\t\tmax-width: 100%;\n\t\t\t\theight: 150px;\n\t\t\t\tmargin-bottom: 15px;\n\t\t\t}\n\n\t\t\t.no-file {\n\t\t\t\tdisplay: none;\n\n\t\t\t\tp {\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tpointer-events: none;\n\t\t\t\t\tmargin: 10px 0px;\n\n\t\t\t\t\t&:nth-child( 2 ) {\n\n\t\t\t\t\t\tmargin-bottom: 25px;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.file {\n\t\t\t\tdisplay: none;\n\t\t\t\tcolor: white;\n\t\t\t\tpointer-events: none;\n\t\t\t\tmargin: 10px 0px 25px;\n\n\t\t\t}\n\n\t\t\t.error-message {\n\t\t\t\tdisplay: none;\n\t\t\t\tcolor: white;\n\t\t\t\tpointer-events: none;\n\t\t\t\tmargin: 10px 0px;\n\n\t\t\t\t&.active {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\topacity: 1!important;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlabel.upload-button {\n\t\t\t\tbackground-color: #4d6ea2;\n\t\t\t\tpadding: 10px;\n\t\t\t\tborder-radius: 5px;\n\t\t\t\tcolor: white;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t}\n\n\t\t.button {\n\t\t\tdisplay: none;\n\t\t\tbackground-color: #4d6ea2;\n\t\t\tmargin-top: 10px;\n\t\t}\n\n\t}\n</style>\n"],"sourceRoot":"src/components"}]}