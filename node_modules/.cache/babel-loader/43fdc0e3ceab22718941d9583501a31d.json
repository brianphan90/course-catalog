{"remainingRequest":"/Users/brianphan/jets/course-catalog-v2/node_modules/babel-loader/lib/index.js!/Users/brianphan/jets/course-catalog-v2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/brianphan/jets/course-catalog-v2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/brianphan/jets/course-catalog-v2/src/components/Catalog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/brianphan/jets/course-catalog-v2/src/components/Catalog.vue","mtime":1609282060284},{"path":"/Users/brianphan/jets/course-catalog-v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/brianphan/jets/course-catalog-v2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/brianphan/jets/course-catalog-v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/brianphan/jets/course-catalog-v2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { HasProperty } from '@/lib/utils';\nimport FiltersPreview from '@/components/FiltersPreview';\nimport Card from '@/components/Card';\nexport default {\n  name: 'catalog',\n  props: {\n    view: {\n      type: String\n    }\n  },\n  data: function data() {\n    return {\n      maxVisible: 50,\n      isFiltersFromUrl: false\n    };\n  },\n  computed: {\n    user: function user() {\n      return this.$store.state.user;\n    },\n    state: function state() {\n      return this.$store.state.courseState;\n    },\n    courses: function courses() {\n      return this.$store.state.courses;\n    },\n    model: function model() {\n      return this.$store.state.model;\n    },\n    searchResults: function searchResults() {\n      return this.$store.state.searchResults;\n    },\n    savedCourseKeys: function savedCourseKeys() {\n      return this.$store.state.savedCourseKeys;\n    },\n    subjectMap: function subjectMap() {\n      return this.$store.state.subjectMap;\n    },\n    selectedFilters: function selectedFilters() {\n      return this.$store.state.selectedFilters;\n    },\n    filters: function filters() {\n      return this.$store.state.filters;\n    },\n    filteredCourses: function filteredCourses() {\n      var _this = this;\n\n      var filteredCourses = [];\n      var filters = this.filters,\n          selectedFilters = this.selectedFilters,\n          savedCourseKeys = this.savedCourseKeys,\n          view = this.view;\n\n      if (!filters.length || !Object.keys(this.model).length) {\n        return [];\n      } // Use all courses or courses from the search results\n\n\n      var courses = function () {\n        if (_this.searchResults !== null && _this.state === 'loaded') {\n          return _this.searchResults;\n        }\n\n        return _this.courses;\n      }(); // Filter by subjects\n\n\n      courses.forEach(function (course) {\n        var addCourse = true;\n\n        if (view === 'saved' && !HasProperty(savedCourseKeys, course.key)) {\n          addCourse = false;\n          return;\n        }\n\n        filters.forEach(function (filter) {\n          var key = filter.key,\n              type = filter.type;\n          var filterCondition = selectedFilters[key];\n\n          if (filterCondition === 'All' || filterCondition === false) {\n            // the default value of the filter is set\n            return;\n          }\n\n          switch (type) {\n            case 'multi-list':\n              if (!course[key]) {\n                addCourse = false;\n              } else if (!course[key].find(function (a) {\n                return a.value === filterCondition;\n              })) {\n                addCourse = false;\n              }\n\n              break;\n\n            case 'arbitrary':\n              if (!course[key]) {\n                addCourse = false;\n              }\n\n              break;\n\n            default:\n              // console.log( course[key], filterCondition );\n              if (course[key] !== filterCondition) {\n                addCourse = false;\n              }\n\n              break;\n          }\n        });\n\n        if (addCourse) {\n          filteredCourses.push(course);\n        }\n      });\n      return filteredCourses;\n    },\n    displayedCourses: function displayedCourses() {\n      return this.filteredCourses.slice(0, this.maxVisible);\n    }\n  },\n  watch: {\n    '$route.query.key': {\n      handler: function handler(key) {\n        if (!key) {\n          this.$store.dispatch('closeCourseInfo');\n          return;\n        }\n\n        this.$store.dispatch('openCourseInfo', key);\n      }\n    },\n    state: function state(_state) {\n      var key = this.$route.query.key; // To open courseInfo on load\n\n      if (_state === 'loaded') {\n        if (key) {\n          this.$store.dispatch('openCourseInfo', key);\n        }\n      }\n    },\n    'selectedFilters': {\n      deep: true,\n      handler: function handler(selectedFilters) {\n        if (!Object.keys(selectedFilters).length) {\n          return;\n        } // This is to prevent it from firing when the selectedFilters are loaded from the url\n\n\n        if (!this.isFiltersFromUrl) {\n          this.isFiltersFromUrl = true;\n          return;\n        }\n\n        this.setFiltersToUrl();\n      }\n    }\n  },\n  methods: {\n    viewCourse: function viewCourse(key) {\n      var query = this.$route.query;\n      this.$router.push({\n        path: this.$route.path,\n        query: _objectSpread({}, query, {\n          key: key\n        })\n      }).catch(function () {});\n    },\n    saveCourse: function saveCourse(course) {\n      var key = course.key;\n      this.$store.dispatch('saveCourse', key);\n    },\n    scrollTopbar: function scrollTopbar(e) {\n      this.$emit('scroll-topbar', e);\n    },\n    loadFiltersFromUrl: function loadFiltersFromUrl() {\n      var _this2 = this;\n\n      var selectedFilters = this.selectedFilters;\n      Object.keys(selectedFilters).forEach(function (key) {\n        var v = _this2.$route.query[key];\n\n        if (!v) {\n          return;\n        }\n\n        var isBoolean = v === 'true' || v === 'false';\n        var value = isBoolean ? v === 'true' : v;\n        var payload = {\n          key: key,\n          value: value\n        };\n\n        _this2.$store.dispatch('selectFilter', payload);\n      });\n    },\n    setFiltersToUrl: function setFiltersToUrl() {\n      var selectedFilters = this.selectedFilters,\n          filters = this.filters;\n      var query = filters.reduce(function (obj, filter) {\n        var key = filter.key,\n            type = filter.type;\n\n        var defaultValue = function () {\n          if (type === 'boolean' || type === 'arbitrary') {\n            return false;\n          }\n\n          return filter.options[0].value;\n        }();\n\n        if (selectedFilters[key] === defaultValue) {\n          return obj;\n        }\n\n        obj[key] = selectedFilters[key]; // eslint-disable-line\n\n        return obj;\n      }, {});\n      this.$router.push({\n        path: this.$route.path,\n        query: query\n      }).catch(function () {});\n    }\n  },\n  mounted: function mounted() {\n    this.loadFiltersFromUrl();\n  },\n  destroyed: function destroyed() {\n    this.$store.dispatch('resetFilters');\n  },\n  components: {\n    Card: Card,\n    FiltersPreview: FiltersPreview\n  }\n};",{"version":3,"sources":["Catalog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,SAAA,WAAA,QAAA,aAAA;AACA,OAAA,cAAA,MAAA,6BAAA;AACA,OAAA,IAAA,MAAA,mBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAHA;AASA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,gBAAA,EAAA;AAFA,KAAA;AAAA,GATA;AAcA,EAAA,QAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA;AACA,KAHA;AAKA,IAAA,KALA,mBAKA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,WAAA;AACA,KAPA;AASA,IAAA,OATA,qBASA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,OAAA;AACA,KAXA;AAaA,IAAA,KAbA,mBAaA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA;AACA,KAfA;AAiBA,IAAA,aAjBA,2BAiBA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,aAAA;AACA,KAnBA;AAqBA,IAAA,eArBA,6BAqBA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,eAAA;AACA,KAvBA;AAyBA,IAAA,UAzBA,wBAyBA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,UAAA;AACA,KA3BA;AA6BA,IAAA,eA7BA,6BA6BA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,eAAA;AACA,KA/BA;AAiCA,IAAA,OAjCA,qBAiCA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,OAAA;AACA,KAnCA;AAqCA,IAAA,eArCA,6BAqCA;AAAA;;AACA,UAAA,eAAA,GAAA,EAAA;AADA,UAGA,OAHA,GAOA,IAPA,CAGA,OAHA;AAAA,UAIA,eAJA,GAOA,IAPA,CAIA,eAJA;AAAA,UAKA,eALA,GAOA,IAPA,CAKA,eALA;AAAA,UAMA,IANA,GAOA,IAPA,CAMA,IANA;;AASA,UAAA,CAAA,OAAA,CAAA,MAAA,IAAA,CAAA,MAAA,CAAA,IAAA,CAAA,KAAA,KAAA,EAAA,MAAA,EAAA;AACA,eAAA,EAAA;AACA,OAXA,CAaA;;;AACA,UAAA,OAAA,GAAA,YAAA;AACA,YAAA,KAAA,CAAA,aAAA,KAAA,IAAA,IAAA,KAAA,CAAA,KAAA,KAAA,QAAA,EAAA;AACA,iBAAA,KAAA,CAAA,aAAA;AACA;;AAEA,eAAA,KAAA,CAAA,OAAA;AAEA,OAPA,EAAA,CAdA,CAuBA;;;AACA,MAAA,OAAA,CAAA,OAAA,CAAA,UAAA,MAAA,EAAA;AACA,YAAA,SAAA,GAAA,IAAA;;AAEA,YAAA,IAAA,KAAA,OAAA,IAAA,CAAA,WAAA,CAAA,eAAA,EAAA,MAAA,CAAA,GAAA,CAAA,EAAA;AACA,UAAA,SAAA,GAAA,KAAA;AAEA;AACA;;AAEA,QAAA,OAAA,CAAA,OAAA,CAAA,UAAA,MAAA,EAAA;AAAA,cACA,GADA,GACA,MADA,CACA,GADA;AAAA,cACA,IADA,GACA,MADA,CACA,IADA;AAGA,cAAA,eAAA,GAAA,eAAA,CAAA,GAAA,CAAA;;AACA,cAAA,eAAA,KAAA,KAAA,IAAA,eAAA,KAAA,KAAA,EAAA;AACA;AACA;AACA;;AAEA,kBAAA,IAAA;AACA,iBAAA,YAAA;AACA,kBAAA,CAAA,MAAA,CAAA,GAAA,CAAA,EAAA;AACA,gBAAA,SAAA,GAAA,KAAA;AACA,eAFA,MAGA,IAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,uBAAA,CAAA,CAAA,KAAA,KAAA,eAAA;AAAA,eAAA,CAAA,EAAA;AACA,gBAAA,SAAA,GAAA,KAAA;AACA;;AAEA;;AAEA,iBAAA,WAAA;AACA,kBAAA,CAAA,MAAA,CAAA,GAAA,CAAA,EAAA;AACA,gBAAA,SAAA,GAAA,KAAA;AACA;;AACA;;AAEA;AACA;AACA,kBAAA,MAAA,CAAA,GAAA,CAAA,KAAA,eAAA,EAAA;AACA,gBAAA,SAAA,GAAA,KAAA;AACA;;AACA;AAtBA;AAyBA,SAlCA;;AAoCA,YAAA,SAAA,EAAA;AACA,UAAA,eAAA,CAAA,IAAA,CAAA,MAAA;AACA;AAEA,OAjDA;AAmDA,aAAA,eAAA;AACA,KAjHA;AAmHA,IAAA,gBAnHA,8BAmHA;AACA,aAAA,KAAA,eAAA,CAAA,KAAA,CAAA,CAAA,EAAA,KAAA,UAAA,CAAA;AACA;AArHA,GAdA;AAuIA,EAAA,KAAA,EAAA;AACA,wBAAA;AACA,MAAA,OADA,mBACA,GADA,EACA;AAEA,YAAA,CAAA,GAAA,EAAA;AACA,eAAA,MAAA,CAAA,QAAA,CAAA,iBAAA;AACA;AACA;;AAEA,aAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,EAAA,GAAA;AACA;AATA,KADA;AAaA,IAAA,KAbA,iBAaA,MAbA,EAaA;AAAA,UACA,GADA,GACA,KAAA,MAAA,CAAA,KADA,CACA,GADA,EAGA;;AACA,UAAA,MAAA,KAAA,QAAA,EAAA;AACA,YAAA,GAAA,EAAA;AACA,eAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,EAAA,GAAA;AACA;AACA;AACA,KAtBA;AAwBA,uBAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,OAFA,mBAEA,eAFA,EAEA;AACA,YAAA,CAAA,MAAA,CAAA,IAAA,CAAA,eAAA,EAAA,MAAA,EAAA;AACA;AACA,SAHA,CAKA;;;AACA,YAAA,CAAA,KAAA,gBAAA,EAAA;AACA,eAAA,gBAAA,GAAA,IAAA;AACA;AACA;;AAEA,aAAA,eAAA;AAEA;AAfA;AAxBA,GAvIA;AAkLA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,GADA,EACA;AAAA,UACA,KADA,GACA,KAAA,MADA,CACA,KADA;AAGA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,KAAA,MAAA,CAAA,IADA;AAEA,QAAA,KAAA,oBACA,KADA;AAEA,UAAA,GAAA,EAAA;AAFA;AAFA,OAAA,EAMA,KANA,CAMA,YAAA,CAAA,CANA;AAOA,KAXA;AAaA,IAAA,UAbA,sBAaA,MAbA,EAaA;AAAA,UACA,GADA,GACA,MADA,CACA,GADA;AAGA,WAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA,GAAA;AACA,KAjBA;AAmBA,IAAA,YAnBA,wBAmBA,CAnBA,EAmBA;AACA,WAAA,KAAA,CAAA,eAAA,EAAA,CAAA;AACA,KArBA;AAuBA,IAAA,kBAvBA,gCAuBA;AAAA;;AAAA,UACA,eADA,GACA,IADA,CACA,eADA;AAGA,MAAA,MAAA,CAAA,IAAA,CAAA,eAAA,EAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,CAAA,GAAA,MAAA,CAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAAA;;AAEA,YAAA,CAAA,CAAA,EAAA;AACA;AACA;;AAEA,YAAA,SAAA,GAAA,CAAA,KAAA,MAAA,IAAA,CAAA,KAAA,OAAA;AACA,YAAA,KAAA,GAAA,SAAA,GAAA,CAAA,KAAA,MAAA,GAAA,CAAA;AAEA,YAAA,OAAA,GAAA;AACA,UAAA,GAAA,EAAA,GADA;AAEA,UAAA,KAAA,EAAA;AAFA,SAAA;;AAKA,QAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,cAAA,EAAA,OAAA;AACA,OAhBA;AAiBA,KA3CA;AA6CA,IAAA,eA7CA,6BA6CA;AAAA,UACA,eADA,GACA,IADA,CACA,eADA;AAAA,UACA,OADA,GACA,IADA,CACA,OADA;AAGA,UAAA,KAAA,GAAA,OAAA,CAAA,MAAA,CAAA,UAAA,GAAA,EAAA,MAAA,EAAA;AAAA,YACA,GADA,GACA,MADA,CACA,GADA;AAAA,YACA,IADA,GACA,MADA,CACA,IADA;;AAGA,YAAA,YAAA,GAAA,YAAA;AACA,cAAA,IAAA,KAAA,SAAA,IAAA,IAAA,KAAA,WAAA,EAAA;AACA,mBAAA,KAAA;AACA;;AAEA,iBAAA,MAAA,CAAA,OAAA,CAAA,CAAA,EAAA,KAAA;AACA,SANA,EAAA;;AAQA,YAAA,eAAA,CAAA,GAAA,CAAA,KAAA,YAAA,EAAA;AACA,iBAAA,GAAA;AACA;;AAEA,QAAA,GAAA,CAAA,GAAA,CAAA,GAAA,eAAA,CAAA,GAAA,CAAA,CAfA,CAeA;;AACA,eAAA,GAAA;AAGA,OAnBA,EAmBA,EAnBA,CAAA;AAqBA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,KAAA,MAAA,CAAA,IADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAAA,EAGA,KAHA,CAGA,YAAA,CAAA,CAHA;AAKA;AA1EA,GAlLA;AA+PA,EAAA,OA/PA,qBA+PA;AACA,SAAA,kBAAA;AACA,GAjQA;AAmQA,EAAA,SAnQA,uBAmQA;AACA,SAAA,MAAA,CAAA,QAAA,CAAA,cAAA;AACA,GArQA;AAuQA,EAAA,UAAA,EAAA;AACA,IAAA,IAAA,EAAA,IADA;AAEA,IAAA,cAAA,EAAA;AAFA;AAvQA,CAAA","sourcesContent":["<template lang=\"pug\">\n\t#catalog(@scroll.passive='scrollTopbar( $event )')\n\t\t//- loading state\n\t\t.loading-circles(v-show='state === \"loading\"')\n\t\t\tspan\n\t\t\tspan\n\t\t\tspan\n\n\t\t.card-container.noselect(v-show='state === \"loaded\"')\n\t\t\tp.spacey(v-if='!displayedCourses.length') {{ view === \"saved\" ? \"No saved courses\" : \"Nothing to show\" }}\n\t\t\tcard(\n\t\t\t\tv-for='course in displayedCourses'\n\t\t\t\t:key='course.key'\n\t\t\t\t:card='course'\n\t\t\t\t:model='model'\n\t\t\t\t:saved='savedCourseKeys.hasOwnProperty( course.key )'\n\t\t\t\t@view='viewCourse( course.key )'\n\t\t\t\t@save='saveCourse'\n\t\t\t)\n\t\t\t.view-more(@click='maxVisible += 10' v-show='filteredCourses.length > maxVisible') View More\n\t\t\tp.no-more.spacey(v-show='filteredCourses.length < maxVisible && displayedCourses.length !== 0') No more {{ view === \"saved\" ? \"saved\" : \"\" }} courses\n\t\t\tfilters-preview(\n\t\t\t\t:max-visible='maxVisible'\n\t\t\t\t:filteredCourses='filteredCourses'\n\t\t\t)\n\n</template>\n\n<script>\nimport { HasProperty } from '@/lib/utils';\nimport FiltersPreview from '@/components/FiltersPreview';\nimport Card from '@/components/Card';\n\nexport default {\n\tname : 'catalog',\n\n\tprops : {\n\t\tview : {\n\t\t\ttype : String\n\t\t}\n\t},\n\n\tdata : () => ( {\n\t\tmaxVisible       : 50,\n\t\tisFiltersFromUrl : false,\n\t} ),\n\n\tcomputed : {\n\t\tuser() {\n\t\t\treturn this.$store.state.user;\n\t\t},\n\n\t\tstate() {\n\t\t\treturn this.$store.state.courseState;\n\t\t},\n\n\t\tcourses() {\n\t\t\treturn this.$store.state.courses;\n\t\t},\n\n\t\tmodel() {\n\t\t\treturn this.$store.state.model;\n\t\t},\n\n\t\tsearchResults() {\n\t\t\treturn this.$store.state.searchResults;\n\t\t},\n\n\t\tsavedCourseKeys() {\n\t\t\treturn this.$store.state.savedCourseKeys;\n\t\t},\n\n\t\tsubjectMap() {\n\t\t\treturn this.$store.state.subjectMap;\n\t\t},\n\n\t\tselectedFilters() {\n\t\t\treturn this.$store.state.selectedFilters;\n\t\t},\n\n\t\tfilters() {\n\t\t\treturn this.$store.state.filters;\n\t\t},\n\n\t\tfilteredCourses() {\n\t\t\tconst filteredCourses = [];\n\t\t\tconst {\n\t\t\t\tfilters,\n\t\t\t\tselectedFilters,\n\t\t\t\tsavedCourseKeys,\n\t\t\t\tview\n\t\t\t} = this;\n\n\t\t\tif ( !filters.length || !Object.keys( this.model ).length ) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\t// Use all courses or courses from the search results\n\t\t\tconst courses = ( () => {\n\t\t\t\tif ( this.searchResults !== null && this.state === 'loaded' ) {\n\t\t\t\t\treturn this.searchResults;\n\t\t\t\t}\n\n\t\t\t\treturn this.courses;\n\n\t\t\t} )();\n\n\t\t\t// Filter by subjects\n\t\t\tcourses.forEach( ( course ) => {\n\t\t\t\tlet addCourse = true;\n\n\t\t\t\tif ( view === 'saved' && !HasProperty( savedCourseKeys, course.key ) ) {\n\t\t\t\t\taddCourse = false;\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfilters.forEach( ( filter ) => {\n\t\t\t\t\tconst { key, type } = filter;\n\n\t\t\t\t\tconst filterCondition = selectedFilters[key];\n\t\t\t\t\tif ( filterCondition === 'All' || filterCondition === false ) {\n\t\t\t\t\t\t// the default value of the filter is set\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch ( type ) {\n\t\t\t\t\t\tcase 'multi-list':\n\t\t\t\t\t\t\tif ( !course[key] ) {\n\t\t\t\t\t\t\t\taddCourse = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if ( !course[key].find( a => a.value === filterCondition ) ) {\n\t\t\t\t\t\t\t\taddCourse = false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'arbitrary':\n\t\t\t\t\t\t\tif ( !course[key] ) {\n\t\t\t\t\t\t\t\taddCourse = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t// console.log( course[key], filterCondition );\n\t\t\t\t\t\t\tif ( course[key] !== filterCondition ) {\n\t\t\t\t\t\t\t\taddCourse = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tif ( addCourse ) {\n\t\t\t\t\tfilteredCourses.push( course );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn filteredCourses;\n\t\t},\n\n\t\tdisplayedCourses() {\n\t\t\treturn this.filteredCourses.slice( 0, this.maxVisible );\n\t\t},\n\n\t},\n\n\twatch : {\n\t\t'$route.query.key' : {\n\t\t\thandler( key ) {\n\n\t\t\t\tif ( !key ) {\n\t\t\t\t\tthis.$store.dispatch( 'closeCourseInfo' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.$store.dispatch( 'openCourseInfo', key );\n\t\t\t}\n\t\t},\n\n\t\tstate( state ) {\n\t\t\tconst { key } = this.$route.query;\n\n\t\t\t// To open courseInfo on load\n\t\t\tif ( state === 'loaded' ) {\n\t\t\t\tif ( key ) {\n\t\t\t\t\tthis.$store.dispatch( 'openCourseInfo', key );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t'selectedFilters' : {\n\t\t\tdeep : true,\n\t\t\thandler( selectedFilters ) {\n\t\t\t\tif ( !Object.keys( selectedFilters ).length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// This is to prevent it from firing when the selectedFilters are loaded from the url\n\t\t\t\tif ( !this.isFiltersFromUrl ) {\n\t\t\t\t\tthis.isFiltersFromUrl = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.setFiltersToUrl();\n\n\t\t\t}\n\t\t},\n\t},\n\n\tmethods : {\n\t\tviewCourse( key ) {\n\t\t\tconst { query } = this.$route;\n\n\t\t\tthis.$router.push( {\n\t\t\t\tpath  : this.$route.path,\n\t\t\t\tquery : {\n\t\t\t\t\t...query,\n\t\t\t\t\tkey\n\t\t\t\t}\n\t\t\t} ).catch( () => {} );\n\t\t},\n\n\t\tsaveCourse( course ) {\n\t\t\tconst { key } = course;\n\n\t\t\tthis.$store.dispatch( 'saveCourse', key );\n\t\t},\n\n\t\tscrollTopbar( e ) {\n\t\t\tthis.$emit( 'scroll-topbar', e );\n\t\t},\n\n\t\tloadFiltersFromUrl() {\n\t\t\tconst { selectedFilters } = this;\n\n\t\t\tObject.keys( selectedFilters ).forEach( ( key ) => {\n\t\t\t\tconst v = this.$route.query[key];\n\n\t\t\t\tif ( !v ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst isBoolean = v === 'true' || v === 'false';\n\t\t\t\tconst value = isBoolean ? v === 'true' : v;\n\n\t\t\t\tconst payload = {\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue,\n\t\t\t\t};\n\n\t\t\t\tthis.$store.dispatch( 'selectFilter', payload );\n\t\t\t} );\n\t\t},\n\n\t\tsetFiltersToUrl() {\n\t\t\tconst { selectedFilters, filters } = this;\n\n\t\t\tconst query = filters.reduce( ( obj, filter ) => {\n\t\t\t\tconst { key, type } = filter;\n\n\t\t\t\tconst defaultValue = ( () => {\n\t\t\t\t\tif ( type === 'boolean' || type === 'arbitrary' ) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn filter.options[0].value;\n\t\t\t\t} )();\n\n\t\t\t\tif ( selectedFilters[key] === defaultValue ) {\n\t\t\t\t\treturn obj;\n\t\t\t\t}\n\n\t\t\t\tobj[key] = selectedFilters[key]; // eslint-disable-line\n\t\t\t\treturn obj;\n\n\n\t\t\t}, {} );\n\n\t\t\tthis.$router.push( {\n\t\t\t\tpath : this.$route.path,\n\t\t\t\tquery,\n\t\t\t} ).catch( () => {} );\n\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.loadFiltersFromUrl();\n\t},\n\n\tdestroyed() {\n\t\tthis.$store.dispatch( 'resetFilters' );\n\t},\n\n\tcomponents : {\n\t\tCard,\n\t\tFiltersPreview,\n\t}\n};\n\n</script>\n\n<style lang=\"scss\">\n@import '@/assets/variables.scss';\n\n#catalog {\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: auto;\n\tpadding-top: 156px;\n\ttransition: padding-top 0.5s ease;\n\n\tp.spacey {\n\t\tmargin-top: 30px;\n\t\ttext-align: center;\n\t\tfont-size: 16px;\n\t\twidth: 100%;\n\n\t\t&.no-more {\n\t\t\tmargin-top: 0;\n\t\t\tpadding: 30px 0;\n\t\t}\n\t}\n\n\t.loading-circles {\n\t\theight: 50px;\n\t\toverflow: hidden;\n\t}\n\n\t.card-container {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tmargin: 10px;\n\t\tflex-shrink: 0;\n\t\tpadding-bottom: 100px;\n\n\t\t.card {\n\t\t\tcursor: pointer;\n\t\t\ttransform: scale(1,1);\n\t\t\ttransition: transform 0.2s ease;\n\n\t\t\t&.active {\n\t\t\t\ttransform: scale(0.95,0.95);\n\t\t\t}\n\t\t}\n\t}\n\n\t.view-more {\n\t\twidth: 100%;\n\t\tmargin: 15px;\n\t\tpadding: 15px;\n\t\tborder-radius: 50px;\n\t\tborder: 2px solid $primary;\n\t\tfont-size: 16px;\n\t\tcolor: $primary;\n\t\tcursor: pointer;\n\t\ttext-align: center;\n\t\tmargin-bottom: 50px;\n\t}\n\n\t.filters-preview {\n\t\tposition: relative;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\tmargin: 30px 0;\n\t\tmax-width: calc(100% - 30px);\n\n\t\t.explanation {\n\n\t\t\tp {\n\t\t\t\tfont-size: 14px;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t}\n\n\t\t.filter-group {\n\t\t\tbackground: white;\n\t\t\tborder-radius: 10px;\n\t\t\tbox-shadow: $floatingObject;\n\t\t\tmargin-top: 15px;\n\t\t\toverflow: hidden;\n\n\t\t\t.filter,\n\t\t\t.clear-all {\n\t\t\t\tpadding: 15px;\n\t\t\t}\n\n\t\t\t.filter {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: space-between;\n\n\t\t\t\t.text {\n\t\t\t\t\tpadding-right: 15px;\n\t\t\t\t}\n\n\t\t\t\t&:not(:nth-child(1)) {\n\t\t\t\t\tborder-top: 1px solid $lightGrey;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.clear-all {\n\t\t\t\tbackground: $cancel;\n\t\t\t\tcolor: white;\n\t\t\t\tfont-weight: 600;\n\t\t\t\tcursor: pointer;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/* Small Devices, Tablets */\n@media only screen and (min-width : 1px) and (max-width : 575px) {\n\n\t#catalog {\n\t\tpadding-top: 245px;\n\t}\n\n}\n</style>\n"],"sourceRoot":"src/components"}]}